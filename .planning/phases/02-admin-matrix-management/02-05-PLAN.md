---
phase: 02-admin-matrix-management
plan: 05
type: execute
wave: 5
depends_on: ["02-04"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Merchant can create a new matrix with breakpoints through the dashboard"
    - "Merchant can set a price at each width/height intersection and see the visual grid"
    - "Merchant can edit an existing matrix (add/remove breakpoints, change prices)"
    - "Merchant can delete a matrix"
    - "Merchant can assign a matrix to products and see which products use each matrix"
    - "Merchant can configure unit preference (mm/cm) in Settings"
  artifacts: []
  key_links: []
---

<objective>
Human verification of the complete matrix management flow end-to-end.

Purpose: Verify that all Phase 2 requirements (MATRIX-01 through MATRIX-06) are met with a working app in the dev store.
Output: Verified Phase 2 complete, or identified issues for gap closure.
</objective>

<execution_context>
@/Users/robinkonijnendijk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/robinkonijnendijk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete matrix management system:
- Database schema with PriceMatrix, Breakpoint, MatrixCell, ProductMatrix models
- Settings page with unit preference (mm/cm)
- Matrix list page with EmptyState and IndexTable
- Create matrix page with starter templates (3x3, 5x5, custom)
- Matrix editor with spreadsheet-style grid editing
- Product assignment via Shopify Resource Picker
- Delete and duplicate matrix actions
- Unsaved changes navigation guard
- Full client and server validation
  </what-built>
  <how-to-verify>
Start the dev server: `shopify app dev`

**Test 1: Settings - Unit Preference**
1. Navigate to Settings
2. Verify unit selector shows "mm" as default
3. Change to "cm" — should save immediately
4. Refresh page — "cm" should persist
5. Change back to "mm"

**Test 2: Create Matrix (MATRIX-01)**
1. Navigate to Matrices page
2. Verify EmptyState shows with "Create matrix" CTA
3. Click "Create matrix"
4. Enter name "Test Matrix" and select "Small (3x3)" template
5. Click "Create" — should redirect to editor

**Test 3: Edit Matrix Grid (MATRIX-02, MATRIX-03)**
1. Verify 3x3 grid displays with breakpoint headers
2. Click a cell and type a price (e.g., 29.99) — should accept the value
3. Fill all 9 cells with different prices
4. Click Save — should succeed with toast confirmation
5. Refresh page — all prices should persist
6. Click "+" on width axis — add a new breakpoint (e.g., 1200)
7. Verify new column appears, grid is now 4x3
8. Fill the new cells and save
9. Click "x" on a breakpoint — column/row removed
10. Try saving with an empty cell — should show validation error

**Test 4: Unsaved Changes**
1. Edit a cell value
2. Click "Matrices" in sidebar
3. Verify warning modal appears ("Unsaved changes")
4. Click "Stay" — should stay on page
5. Click "Leave page" — should navigate away

**Test 5: Product Assignment (MATRIX-05, MATRIX-06)**
1. In the matrix editor, click "Add products"
2. Shopify Resource Picker should open
3. Select a product — it should appear in the products list
4. Create a second matrix and try assigning the same product
5. Warning should appear about reassignment
6. Confirm — product moves to new matrix

**Test 6: Delete Matrix (MATRIX-04)**
1. Go to matrix list
2. Click delete action on a matrix
3. Confirmation modal should show product count
4. Confirm delete — matrix removed from list
5. Check that assigned products are unassigned (no orphaned data)

**Test 7: Duplicate Matrix**
1. Go to matrix list
2. Click duplicate action on a matrix
3. New matrix should appear with "(copy)" suffix
4. Open the copy — should have same breakpoints and prices
5. Products should NOT be duplicated (only structure)

**Test 8: Matrix List**
1. Verify list shows matrix name, grid size, product count, last edited
2. Click a row — should navigate to editor
3. Verify data matches what was saved
  </how-to-verify>
  <resume-signal>Type "approved" if all tests pass, or describe any issues found.</resume-signal>
</task>

</tasks>

<verification>
All 6 Phase 2 requirements verified:
- MATRIX-01: Create matrix with breakpoints
- MATRIX-02: Set prices at intersections
- MATRIX-03: Edit matrix (add/remove breakpoints, change prices)
- MATRIX-04: Delete matrix
- MATRIX-05: Assign matrix to products
- MATRIX-06: One matrix per product constraint
</verification>

<success_criteria>
- All 8 test scenarios pass in the dev store
- No data inconsistencies after CRUD operations
- UI is responsive and follows Polaris design patterns
- Validation prevents invalid states
</success_criteria>

<output>
After completion, create `.planning/phases/02-admin-matrix-management/02-05-SUMMARY.md`
</output>
